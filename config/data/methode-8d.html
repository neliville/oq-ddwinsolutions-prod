<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√©thode 8D - Outils Qualit√©</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .intro {
            background: #f8f9ff;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            border-left: 4px solid #667eea;
        }

        .intro h2 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .intro p {
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .steps-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .step-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .step-card h3 {
            font-size: 1.1em;
            margin-bottom: 5px;
        }

        .step-card p {
            font-size: 0.9em;
            opacity: 0.95;
        }

        .problem-info {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            border: 2px solid #e0e0e0;
        }

        .problem-info h3 {
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }

        .problem-info h3::before {
            content: "‚ö†Ô∏è";
            margin-right: 10px;
            font-size: 1.3em;
        }

        .discipline-section {
            background: #fff;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 25px;
            border: 2px solid #e0e0e0;
            border-left: 6px solid #667eea;
        }

        .discipline-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .discipline-number {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            font-weight: bold;
            margin-right: 15px;
        }

        .discipline-title {
            flex: 1;
        }

        .discipline-title h3 {
            color: #667eea;
            font-size: 1.3em;
            margin-bottom: 5px;
        }

        .discipline-title p {
            color: #666;
            font-size: 0.95em;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
            font-size: 0.95em;
            display: block;
        }

        .helper-text {
            font-size: 0.85em;
            color: #666;
            font-style: italic;
            margin-bottom: 8px;
        }

        input[type="text"],
        input[type="date"],
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
            font-family: inherit;
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        input[type="text"]:focus,
        input[type="date"]:focus,
        textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .team-member {
            display: grid;
            grid-template-columns: 2fr 2fr 1fr auto;
            gap: 10px;
            margin-bottom: 10px;
            align-items: center;
        }

        button {
            padding: 12px 25px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
            font-weight: 600;
        }

        button:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-small {
            padding: 8px 15px;
            font-size: 0.9em;
        }

        .btn-remove {
            background: #e74c3c;
        }

        .btn-remove:hover {
            background: #c0392b;
        }

        .btn-add {
            background: #27ae60;
            margin-top: 10px;
        }

        .btn-add:hover {
            background: #229954;
        }

        .btn-generate {
            background: #667eea;
            font-size: 1.2em;
            padding: 18px 50px;
            display: block;
            margin: 30px auto;
        }

        .progress-bar-container {
            background: #e0e0e0;
            border-radius: 10px;
            height: 30px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #27ae60, #229954);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            transition: width 0.5s;
        }

        .results {
            margin-top: 30px;
        }

        .report-container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .report-header {
            border-bottom: 3px solid #667eea;
            padding-bottom: 15px;
            margin-bottom: 25px;
        }

        .report-header h2 {
            color: #667eea;
            font-size: 2em;
        }

        .report-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9ff;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .report-section h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
            display: flex;
            align-items: center;
        }

        .report-section .content {
            line-height: 1.8;
            color: #333;
        }

        .summary-box {
            background: #e8f5e9;
            padding: 25px;
            border-radius: 10px;
            margin-top: 30px;
            border-left: 4px solid #27ae60;
        }

        .summary-box h3 {
            color: #27ae60;
            margin-bottom: 15px;
        }

        .summary-box ul {
            margin-left: 20px;
            line-height: 1.8;
        }

        .timeline {
            position: relative;
            padding-left: 30px;
            margin-top: 20px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 10px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: #667eea;
        }

        .timeline-item {
            position: relative;
            padding-left: 30px;
            margin-bottom: 20px;
        }

        .timeline-item::before {
            content: '‚úì';
            position: absolute;
            left: -25px;
            width: 30px;
            height: 30px;
            background: #27ae60;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .timeline-item h4 {
            color: #667eea;
            margin-bottom: 5px;
        }

        @media (max-width: 968px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 1.8em;
            }

            .steps-overview {
                grid-template-columns: 1fr;
            }

            .team-member {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üîß M√©thode 8D</h1>
            <p class="subtitle">8 Disciplines pour r√©soudre les probl√®mes √† la racine</p>
        </header>

        <div class="intro">
            <h2>La M√©thode 8D (Eight Disciplines)</h2>
            <p>La m√©thode 8D est une approche structur√©e de r√©solution de probl√®mes d√©velopp√©e par Ford Motor Company. 
            Elle permet d'identifier, corriger et √©liminer les probl√®mes r√©currents par une d√©marche collaborative en √©quipe.</p>
            <p><strong>Cette m√©thode est un standard dans l'industrie automobile (IATF 16949), l'a√©ronautique et le manufacturing.</strong></p>
            <p>Les 8 disciplines garantissent une r√©solution compl√®te : de l'urgence imm√©diate aux actions pr√©ventives long terme.</p>
        </div>

        <div class="steps-overview">
            <div class="step-card">
                <h3>D0 - Pr√©paration</h3>
                <p>D√©cision de lancer le 8D</p>
            </div>
            <div class="step-card">
                <h3>D1 - √âquipe</h3>
                <p>Constituer l'√©quipe</p>
            </div>
            <div class="step-card">
                <h3>D2 - D√©crire</h3>
                <p>D√©crire le probl√®me</p>
            </div>
            <div class="step-card">
                <h3>D3 - Contenir</h3>
                <p>Actions imm√©diates</p>
            </div>
            <div class="step-card">
                <h3>D4 - Causes</h3>
                <p>Analyser les causes</p>
            </div>
            <div class="step-card">
                <h3>D5 - Corriger</h3>
                <p>Actions correctives</p>
            </div>
            <div class="step-card">
                <h3>D6 - Valider</h3>
                <p>V√©rifier l'efficacit√©</p>
            </div>
            <div class="step-card">
                <h3>D7 - Pr√©venir</h3>
                <p>Standardiser</p>
            </div>
            <div class="step-card">
                <h3>D8 - F√©liciter</h3>
                <p>Capitaliser</p>
            </div>
        </div>

        <div class="problem-info">
            <h3>Informations du probl√®me</h3>
            <div class="form-group">
                <label>Titre du probl√®me / N¬∞ du rapport 8D</label>
                <input type="text" id="problemTitle" placeholder="Ex: 8D-2024-042 - D√©fauts de soudure sur ch√¢ssis">
            </div>
            <div class="form-group">
                <label>Date d'ouverture du 8D</label>
                <input type="date" id="openDate">
            </div>
        </div>

        <!-- D1 -->
        <div class="discipline-section">
            <div class="discipline-header">
                <div class="discipline-number">D1</div>
                <div class="discipline-title">
                    <h3>Constituer l'√©quipe pluridisciplinaire</h3>
                    <p>Former une √©quipe avec les comp√©tences n√©cessaires (production, qualit√©, m√©thodes, ing√©nierie...)</p>
                </div>
            </div>
            <div class="form-group">
                <label>Responsable / Pilote du 8D</label>
                <input type="text" id="d1Leader" placeholder="Ex: Jean Dupont - Responsable Qualit√©">
            </div>
            <div class="form-group">
                <label>Membres de l'√©quipe</label>
                <p class="helper-text">Ajoutez les membres avec leur fonction et expertise</p>
                <div id="teamMembers"></div>
                <button class="btn-add btn-small" onclick="addTeamMember()">‚ûï Ajouter un membre</button>
            </div>
        </div>

        <!-- D2 -->
        <div class="discipline-section">
            <div class="discipline-header">
                <div class="discipline-number">D2</div>
                <div class="discipline-title">
                    <h3>D√©crire le probl√®me (QQOQCCP)</h3>
                    <p>Description exhaustive et factuelle du probl√®me avec donn√©es chiffr√©es</p>
                </div>
            </div>
            <div class="form-group">
                <label>Description d√©taill√©e du probl√®me</label>
                <p class="helper-text">Utilisez QQOQCCP : Qui, Quoi, O√π, Quand, Comment, Combien, Pourquoi</p>
                <textarea id="d2Description" placeholder="Ex: Des d√©fauts de soudure (p√©n√©tration insuffisante) sont constat√©s sur les ch√¢ssis de la s√©rie B depuis le 15/01/2024. 
Localisation : poste de soudage n¬∞3, ligne 2. 
Fr√©quence : 35 pi√®ces d√©fectueuses sur 500 produites (7%).
Impact : risque de rupture en service, r√©clamation client majeure."></textarea>
            </div>
            <div class="form-group">
                <label>Photos / Preuves (description)</label>
                <input type="text" id="d2Evidence" placeholder="Ex: Photos des d√©fauts, rapports de contr√¥le, plaintes clients">
            </div>
        </div>

        <!-- D3 -->
        <div class="discipline-section">
            <div class="discipline-header">
                <div class="discipline-number">D3</div>
                <div class="discipline-title">
                    <h3>Actions de containment imm√©diates</h3>
                    <p>Prot√©ger le client en attendant les actions correctives d√©finitives</p>
                </div>
            </div>
            <div class="form-group">
                <label>Actions imm√©diates mises en place</label>
                <p class="helper-text">Actions d'urgence pour stopper la propagation du d√©faut</p>
                <textarea id="d3Actions" placeholder="Ex: 
- Arr√™t de la production sur le poste concern√©
- Tri des pi√®ces en stock (500 pi√®ces contr√¥l√©es √† 100%)
- Inspection renforc√©e sur les pi√®ces suivantes (contr√¥le syst√©matique)
- Blocage des exp√©ditions vers le client
- Retour et tri chez le client (150 pi√®ces)"></textarea>
            </div>
            <div class="form-group">
                <label>Date de mise en ≈ìuvre</label>
                <input type="date" id="d3Date">
            </div>
            <div class="form-group">
                <label>Efficacit√© v√©rifi√©e ?</label>
                <input type="text" id="d3Verification" placeholder="Ex: Oui - Aucun nouveau d√©faut d√©tect√© depuis 7 jours">
            </div>
        </div>

        <!-- D4 -->
        <div class="discipline-section">
            <div class="discipline-header">
                <div class="discipline-number">D4</div>
                <div class="discipline-title">
                    <h3>Identifier les causes racines</h3>
                    <p>Analyse approfondie sur le terrain (Gemba) avec 5M, 5 Pourquoi, Ishikawa</p>
                </div>
            </div>
            <div class="form-group">
                <label>Causes racines identifi√©es</label>
                <p class="helper-text">Allez au Gemba ! Utilisez 5 Pourquoi, Ishikawa (5M), analyse de donn√©es</p>
                <textarea id="d4Causes" placeholder="Ex: Causes racines identifi√©es (analyse 5M + 5 Pourquoi) :
1. MATI√àRE : Changement de fournisseur de fil de soudure le 10/01 (nouveau fil moins adapt√©)
2. M√âTHODE : Param√®tres de soudage non r√©ajust√©s apr√®s changement de fil
3. MAIN D'≈íUVRE : Op√©rateur r√©cemment form√©, manque d'exp√©rience sur d√©tection des d√©rives
4. MILIEU : Courants d'air sur le poste perturbant le bain de fusion
5. Cause racine principale : Absence de proc√©dure de validation lors changement de consommable"></textarea>
            </div>
            <div class="form-group">
                <label>M√©thode d'analyse utilis√©e</label>
                <input type="text" id="d4Method" placeholder="Ex: 5 Pourquoi + Ishikawa (5M) + Gemba Walk + Analyse micrographique">
            </div>
        </div>

        <!-- D5 -->
        <div class="discipline-section">
            <div class="discipline-header">
                <div class="discipline-number">D5</div>
                <div class="discipline-title">
                    <h3>D√©finir et mettre en ≈ìuvre les actions correctives</h3>
                    <p>Actions permanentes pour √©liminer les causes racines</p>
                </div>
            </div>
            <div class="form-group">
                <label>Actions correctives permanentes</label>
                <p class="helper-text">Actions cibl√©es sur chaque cause racine identifi√©e</p>
                <textarea id="d5Actions" placeholder="Ex: Actions correctives permanentes :
1. Retour au fournisseur de fil d'origine avec contrat long terme (d√©lai : imm√©diat)
2. R√©ajustement des param√®tres de soudage et validation par soudures tests (fait le 05/02)
3. Formation compl√©mentaire des op√©rateurs sur d√©tection anomalies (formation 2j le 10/02)
4. Installation d'√©crans de protection contre courants d'air (fait le 08/02)
5. Cr√©ation proc√©dure validation changement consommable avec essais obligatoires"></textarea>
            </div>
            <div class="form-group">
                <label>Responsable et √©ch√©ance</label>
                <input type="text" id="d5Responsible" placeholder="Ex: Responsable M√©thodes - 15/02/2024">
            </div>
        </div>

        <!-- D6 -->
        <div class="discipline-section">
            <div class="discipline-header">
                <div class="discipline-number">D6</div>
                <div class="discipline-title">
                    <h3>Valider l'efficacit√© des actions</h3>
                    <p>Mesurer l'efficacit√© r√©elle sur le terrain avec KPIs</p>
                </div>
            </div>
            <div class="form-group">
                <label>M√©thode de validation</label>
                <p class="helper-text">Comment allez-vous v√©rifier que le probl√®me est r√©solu ?</p>
                <textarea id="d6Validation" placeholder="Ex: Validation de l'efficacit√© :
- Suivi quotidien du taux de d√©fauts sur 4 semaines (objectif : <1%)
- Audits qualit√© hebdomadaires sur le poste de soudage
- Contr√¥les destructifs sur √©chantillons (tests de traction, micrographie)
- Retour d'exp√©rience client apr√®s 2 mois (aucune r√©clamation)"></textarea>
            </div>
            <div class="form-group">
                <label>R√©sultats obtenus</label>
                <textarea id="d6Results" placeholder="Ex: R√©sultats apr√®s 1 mois :
- Taux de d√©fauts pass√© de 7% √† 0,3% (objectif atteint)
- Aucune r√©clamation client depuis 6 semaines
- Validation OK par audit qualit√© le 15/03/2024"></textarea>
            </div>
        </div>

        <!-- D7 -->
        <div class="discipline-section">
            <div class="discipline-header">
                <div class="discipline-number">D7</div>
                <div class="discipline-title">
                    <h3>Pr√©venir la r√©currence (Standardiser)</h3>
                    <p>Mettre √† jour les documents, proc√©dures, AMDEC et d√©ployer transversalement</p>
                </div>
            </div>
            <div class="form-group">
                <label>Actions de standardisation et de pr√©vention</label>
                <p class="helper-text">Yokoten (d√©ploiement horizontal), mise √† jour documentaire, formation</p>
                <textarea id="d7Prevention" placeholder="Ex: Actions de pr√©vention et standardisation :
1. Mise √† jour de la proc√©dure de soudage (PS-045 rev.C)
2. Cr√©ation checklist de validation changement consommable (int√©gr√©e au syst√®me qualit√©)
3. D√©ploiement de la proc√©dure sur les 5 autres postes de soudage (Yokoten)
4. Mise √† jour AMDEC Process (ajout du risque 'changement consommable')
5. Formation des 12 op√©rateurs soudeurs sur nouvelle proc√©dure
6. Audit mensuel de v√©rification du respect de la proc√©dure"></textarea>
            </div>
            <div class="form-group">
                <label>Documents mis √† jour</label>
                <input type="text" id="d7Documents" placeholder="Ex: PS-045, AMDEC-Soudage-v3, Plan de surveillance, Programme de formation">
            </div>
        </div>

        <!-- D8 -->
        <div class="discipline-section">
            <div class="discipline-header">
                <div class="discipline-number">D8</div>
                <div class="discipline-title">
                    <h3>F√©liciter l'√©quipe et capitaliser</h3>
                    <p>Reconna√Ætre les contributions et partager les apprentissages</p>
                </div>
            </div>
            <div class="form-group">
                <label>Reconnaissance de l'√©quipe</label>
                <textarea id="d8Recognition" placeholder="Ex: F√©licitations et reconnaissance :
- R√©union de cl√¥ture le 20/03/2024 avec pr√©sentation des r√©sultats
- Remerciements officiels de la direction pour la r√©activit√© de l'√©quipe
- Communication dans le journal interne de l'entreprise
- Bonus qualit√© pour l'√©quipe projet"></textarea>
            </div>
            <div class="form-group">
                <label>Capitalisation / Le√ßons apprises</label>
                <textarea id="d8Learning" placeholder="Ex: Capitalisation et le√ßons apprises :
- Pr√©sentation du cas en REX qualit√© mensuel (partage avec autres services)
- Ajout du cas dans la biblioth√®que de cas 8D (base de connaissances)
- Points √† am√©liorer : d√©lai de d√©tection trop long, communication client √† renforcer
- Mise en place d'une alerte automatique en cas de changement consommable"></textarea>
            </div>
            <div class="form-group">
                <label>Date de cl√¥ture du 8D</label>
                <input type="date" id="d8CloseDate">
            </div>
        </div>

        <button class="btn-generate" onclick="generateReport()">üìÑ G√©n√©rer le rapport 8D complet</button>

        <div id="results" class="results" style="display: none;">
            <div class="report-container">
                <div class="report-header">
                    <h2 id="reportTitle">Rapport 8D</h2>
                    <p style="color: #666; margin-top: 10px;" id="reportDate"></p>
                </div>

                <div id="progressSection" style="margin-bottom: 30px;">
                    <h3 style="color: #333; margin-bottom: 10px;">Avancement du 8D</h3>
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="progressBar">0%</div>
                    </div>
                </div>

                <div class="timeline" id="reportTimeline"></div>

                <div class="summary-box">
                    <h3>‚úÖ R√©sum√© de l'efficacit√© du 8D</h3>
                    <p id="summaryText"></p>
                    <ul id="summaryList"></ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        let teamMemberCount = 0;

        function addTeamMember() {
            teamMemberCount++;
            const container = document.getElementById('teamMembers');
            const memberDiv = document.createElement('div');
            memberDiv.className = 'team-member';
            memberDiv.id = `member-${teamMemberCount}`;
            memberDiv.innerHTML = `
                <input type="text" placeholder="Nom" class="member-name">
                <input type="text" placeholder="Fonction" class="member-function">
                <input type="text" placeholder="Expertise" class="member-expertise">
                <button class="btn-small btn-remove" onclick="removeTeamMember(${teamMemberCount})">‚úñ</button>
            `;
            container.appendChild(memberDiv);
        }

        function removeTeamMember(id) {
            const member = document.getElementById(`member-${id}`);
            if (member) member.remove();
        }

        function generateReport() {
            // R√©cup√©rer toutes les donn√©es
            const data = {
                title: document.getElementById('problemTitle').value.trim(),
                openDate: document.getElementById('openDate').value,
                d1Leader: document.getElementById('d1Leader').value.trim(),
                d2Description: document.getElementById('d2Description').value.trim(),
                d2Evidence: document.getElementById('d2Evidence').value.trim(),
                d3Actions: document.getElementById('d3Actions').value.trim(),
                d3Date: document.getElementById('d3Date').value,
                d3Verification: document.getElementById('d3Verification').value.trim(),
                d4Causes: document.getElementById('d4Causes').value.trim(),
                d4Method: document.getElementById('d4Method').value.trim(),
                d5Actions: document.getElementById('d5Actions').value.trim(),
                d5Responsible: document.getElementById('d5Responsible').value.trim(),
                d6Validation: document.getElementById('d6Validation').value.trim(),
                d6Results: document.getElementById('d6Results').value.trim(),
                d7Prevention: document.getElementById('d7Prevention').value.trim(),
                d7Documents: document.getElementById('d7Documents').value.trim(),
                d8Recognition: document.getElementById('d8Recognition').value.trim(),
                d8Learning: document.getElementById('d8Learning').value.trim(),
                d8CloseDate: document.getElementById('d8CloseDate').value
            };

            // Collecter les membres de l'√©quipe
            const teamMembers = [];
            document.querySelectorAll('.team-member').forEach(member => {
                const name = member.querySelector('.member-name').value.trim();
                const func = member.querySelector('.member-function').value.trim();
                const exp = member.querySelector('.member-expertise').value.trim();
                if (name) {
                    teamMembers.push({ name, function: func, expertise: exp });
                }
            });

            // Validation minimale
            if (!data.title || !data.d2Description) {
                alert('Veuillez renseigner au minimum le titre et la description du probl√®me (D2).');
                return;
            }

            // Calculer le taux de compl√©tion
            const fields = [
                data.d1Leader, data.d2Description, data.d3Actions, data.d4Causes,
                data.d5Actions, data.d6Validation, data.d7Prevention, data.d8Recognition
            ];
            const completed = fields.filter(f => f && f.length > 0).length;
            const progress = Math.round((completed / fields.length) * 100);

            // G√©n√©rer le rapport
            document.getElementById('reportTitle').textContent = data.title || 'Rapport 8D';
            document.getElementById('reportDate').textContent = `Ouvert le ${new Date(data.openDate || Date.now()).toLocaleDateString('fr-FR')}`;

            // Barre de progression
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = progress + '%';
            progressBar.textContent = progress + '%';

            // Timeline
            const timeline = document.getElementById('reportTimeline');
            timeline.innerHTML = '';

            const steps = [
                { num: 'D1', title: '√âquipe constitu√©e', content: data.d1Leader + (teamMembers.length ? ` + ${teamMembers.length} membre(s)` : '') },
                { num: 'D2', title: 'Probl√®me d√©crit', content: data.d2Description },
                { num: 'D3', title: 'Actions de containment', content: data.d3Actions },
                { num: 'D4', title: 'Causes racines identifi√©es', content: data.d4Causes },
                { num: 'D5', title: 'Actions correctives', content: data.d5Actions },
                { num: 'D6', title: 'Validation', content: data.d6Results || data.d6Validation },
                { num: 'D7', title: 'Standardisation', content: data.d7Prevention },
                { num: 'D8', title: 'Capitalisation', content: data.d8Learning }
            ];

            steps.forEach(step => {
                if (step.content) {
                    const item = document.createElement('div');
                    item.className = 'timeline-item';
                    item.innerHTML = `
                        <h4>${step.num} - ${step.title}</h4>
                        <p style="color: #666;">${step.content.substring(0, 200)}${step.content.length > 200 ? '...' : ''}</p>
                    `;
                    timeline.appendChild(item);
                }
            });

            // R√©sum√©
            const summaryText = document.getElementById('summaryText');
            const summaryList = document.getElementById('summaryList');

            if (progress === 100) {
                summaryText.innerHTML = '<strong>üéâ F√©licitations ! Le rapport 8D est complet.</strong><br>Toutes les disciplines ont √©t√© renseign√©es. Le probl√®me a √©t√© trait√© de mani√®re exhaustive.';
            } else {
                summaryText.innerHTML = `<strong>‚ö†Ô∏è Rapport 8D en cours (${progress}% compl√©t√©)</strong><br>Certaines disciplines restent √† compl√©ter pour finaliser la d√©marche.`;
            }

            summaryList.innerHTML = `
                <li><strong>Probl√®me :</strong> ${data.title || 'Non renseign√©'}</li>
                <li><strong>Pilote :</strong> ${data.d1Leader || 'Non d√©sign√©'}</li>
                <li><strong>Date d'ouverture :</strong> ${data.openDate ? new Date(data.openDate).toLocaleDateString('fr-FR') : 'Non renseign√©e'}</li>
                <li><strong>Date de cl√¥ture :</strong> ${data.d8CloseDate ? new Date(data.d8CloseDate).toLocaleDateString('fr-FR') : 'En cours'}</li>
                <li><strong>Disciplines compl√©t√©es :</strong> ${completed}/8</li>
            `;

            if (data.d6Results) {
                summaryList.innerHTML += `<li><strong>‚úÖ Efficacit√© valid√©e :</strong> ${data.d6Results.substring(0, 100)}</li>`;
            }

            // Afficher les r√©sultats
            document.getElementById('results').style.display = 'block';
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }

        // Initialiser avec des exemples
        window.onload = function() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('problemTitle').value = '8D-2024-042 - D√©fauts de soudure sur ch√¢ssis s√©rie B';
            document.getElementById('openDate').value = today;
            document.getElementById('d1Leader').value = 'Jean Dupont - Responsable Qualit√©';
            
            // Ajouter 3 membres d'√©quipe
            for (let i = 0; i < 3; i++) addTeamMember();
            const members = [
                { name: 'Marie Martin', func: 'Ing√©nieur M√©thodes', exp: 'Soudage' },
                { name: 'Pierre Leroy', func: 'Chef d\'atelier', exp: 'Production' },
                { name: 'Sophie Bernard', func: 'Technicien Qualit√©', exp: 'Contr√¥le destructif' }
            ];
            document.querySelectorAll('.team-member').forEach((member, i) => {
                if (members[i]) {
                    member.querySelector('.member-name').value = members[i].name;
                    member.querySelector('.member-function').value = members[i].func;
                    member.querySelector('.member-expertise').value = members[i].exp;
                }
            });

            document.getElementById('d2Description').value = `D√©fauts de soudure constat√©s sur ch√¢ssis s√©rie B depuis le 15/01/2024.
Nature du d√©faut : P√©n√©tration insuffisante du cordon de soudure (profondeur <3mm au lieu de 5mm requis).
Localisation : Poste de soudage n¬∞3, ligne d'assemblage 2, soudure longitudinale du longeron.
Fr√©quence : 35 pi√®ces d√©fectueuses d√©tect√©es sur 500 produites (taux de d√©faut : 7%).
Impact : Risque de rupture en service, r√©clamation client majeure (Renault), co√ªt estim√© 45 000‚Ç¨.`;

            document.getElementById('d2Evidence').value = 'Photos des d√©fauts, rapports de contr√¥le (RC-2024-125), plainte client REF-REN-2024-08, analyses micrographiques';
            
            document.getElementById('d3Actions').value = `Actions imm√©diates (mises en place le 16/01/2024) :
- Arr√™t imm√©diat de la production sur le poste n¬∞3
- Tri √† 100% des pi√®ces en stock (500 pi√®ces) ‚Üí 28 non-conformes identifi√©es et mises au rebut
- Inspection renforc√©e 100% sur production suivante pendant 2 semaines
- Blocage des exp√©ditions vers client (150 pi√®ces retenues)
- Intervention chez le client pour tri de 150 pi√®ces d√©j√† livr√©es ‚Üí 7 pi√®ces d√©fectueuses r√©cup√©r√©es`;

            document.getElementById('d3Date').value = today;
            document.getElementById('d3Verification').value = 'Oui - Efficacit√© valid√©e : aucun nouveau d√©faut d√©tect√© depuis 10 jours (contr√¥le 100%)';

            document.getElementById('d4Causes').value = `Analyse des causes racines (m√©thode : 5 Pourquoi + Ishikawa 5M + Gemba Walk) :

MATI√àRE : Changement de fournisseur de fil de soudure le 10/01 (fil FIL-B remplac√© par FIL-C, diam√®tre identique mais composition l√©g√®rement diff√©rente).

M√âTHODE : Param√®tres de soudage non r√©ajust√©s suite au changement de fil (intensit√© et vitesse inchang√©es, inadapt√©es au nouveau fil).

MAIN D'≈íUVRE : Op√©rateur r√©cent (3 mois d'anciennet√©), form√© sur ancien fil, n'a pas d√©tect√© la d√©rive progressive.

MACHINE : Pas de cause machine identifi√©e (maintenance OK, calibration OK).

MILIEU : Courants d'air sur le poste perturbant le bain de fusion et la protection gazeuse.

‚û°Ô∏è CAUSE RACINE PRINCIPALE : Absence de proc√©dure de validation lors du changement de consommable + manque de formation sur d√©tection anomalies.`;

            document.getElementById('d4Method').value = '5 Pourquoi, Ishikawa (5M), Gemba Walk, Analyses micrographiques, Tests comparatifs fils';
        };
    </script>
</body>
</html>