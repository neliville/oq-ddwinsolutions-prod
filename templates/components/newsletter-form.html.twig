{# Le formulaire doit être passé depuis le contrôleur #}
{% set form = newsletterForm|default(null) %}

{% if form is null %}
    <div class="alert alert-warning">
        <i class="fas fa-exclamation-triangle me-2"></i>
        Le formulaire newsletter n'est pas disponible.
    </div>
{% else %}
    {{ form_start(form, {
        'attr': {
            'class': 'newsletter-signup-form row g-3 justify-content-center justify-content-lg-start align-items-center',
            'id': 'newsletterForm',
            'action': path('app_newsletter_subscribe'),
            'data-turbo': 'false',
            'data-newsletter': 'true',
            'data-feedback-target': '#newsletterMessage'
        }
    }) }}
        <div class="col-12 col-lg-7">
            {{ form_widget(form.email, {'attr': {
                'class': 'form-control form-control-lg newsletter-email-field',
                'placeholder': 'email'
            }}) }}
            {{ form_errors(form.email) }}
        </div>
        <div class="col-12 col-lg-5">
            <button type="submit" class="btn btn-primary btn-lg w-100 newsletter-submit-btn">
                <i class="fas fa-envelope me-2"></i>S'abonner
            </button>
        </div>
        {{ form_rest(form) }}
    {{ form_end(form) }}

    <div class="newsletter-legal text-start mt-3">
        <small>
            En soumettant ce formulaire, vous acceptez notre
            <a href="{{ path('app_legal_politique_confidentialite') }}" target="_blank" rel="noopener" class="text-decoration-underline">
                politique de confidentialité
            </a>.
        </small>
        <small class="d-block mt-1 text-muted">Pas de spam, désinscription en un clic.</small>
    </div>

    <div id="newsletterMessage" class="mt-3 d-none"></div>
{% endif %}

