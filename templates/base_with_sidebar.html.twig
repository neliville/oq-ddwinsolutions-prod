{% extends 'base.html.twig' %}

{% block body %}
<div class="d-flex">
    <!-- Overlay pour mobile quand sidebar ouverte -->
    {% if app.user %}
    <div class="sidebar-overlay" id="sidebarOverlay" style="display: none;"></div>
    {% endif %}

    <!-- Sidebar Dashboard pour utilisateurs connectés -->
    {% if app.user %}
        {% include 'components/admin-sidebar.html.twig' %}
    {% endif %}

    <!-- Contenu principal -->
    <main class="main-content flex-grow-1" {% if app.user %}style="transition: margin-left 0.3s; padding-top: 76px; padding-bottom: 100px;"{% else %}style="padding-top: 76px;"{% endif %}>
        {% block content %}{% endblock %}
    </main>
</div>

{% if app.user %}
<style>
    /* Styles responsive pour la sidebar */
    @media (min-width: 769px) {
        .main-content {
            margin-left: 280px !important;
        }
        .sidebar-overlay {
            display: none !important;
        }
        .admin-sidebar {
            transform: translateX(0) !important;
        }
    }

    @media (max-width: 768px) {
        .main-content {
            margin-left: 0 !important;
        }
        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1019;
            transition: opacity 0.3s ease;
        }
        .sidebar-overlay.show {
            display: block !important;
            opacity: 1;
        }
        .sidebar-overlay:not(.show) {
            opacity: 0;
            pointer-events: none;
        }
        
        /* Amélioration de l'accessibilité pour le bouton hamburger */
        #sidebarToggle {
            min-width: 44px;
            min-height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        #sidebarToggle:focus-visible {
            outline: 3px solid var(--primary-color);
            outline-offset: 2px;
            border-radius: 4px;
        }
    }
</style>
{% endif %}
{% endblock %}

